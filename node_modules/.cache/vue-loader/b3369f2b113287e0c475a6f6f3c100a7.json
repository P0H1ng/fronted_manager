{"remainingRequest":"/home/kali/fronted_manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kali/fronted_manager/src/views/Challenge.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kali/fronted_manager/src/views/Challenge.vue","mtime":1718175901583},{"path":"/home/kali/fronted_manager/node_modules/cache-loader/dist/cjs.js","mtime":1725805665522},{"path":"/home/kali/fronted_manager/node_modules/babel-loader/lib/index.js","mtime":1725805665488},{"path":"/home/kali/fronted_manager/node_modules/cache-loader/dist/cjs.js","mtime":1725805665522},{"path":"/home/kali/fronted_manager/node_modules/vue-loader/lib/index.js","mtime":1725805708031}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJDaGFsbGVuZ2UiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0xvYWRpbmc6IHRydWUsCiAgICAgICAgICAgIGNoYWxsZW5nZUxpc3Q6IG51bGwsCiAgICAgICAgICAgIG5ld0NoYWxsZW5nZURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgICAgICBlZGl0Q2hhbGxlbmdlRGlhbG9nVmlzaWJsZTogZmFsc2UsCgogICAgICAgICAgICBuZXdDaGFsbGVuZ2VGb3JtOiB7CiAgICAgICAgICAgICAgICBUaXRsZTogJycsCiAgICAgICAgICAgICAgICBCYXNlU2NvcmU6IDEwMDAsCiAgICAgICAgICAgICAgICBBdXRvUmVmcmVzaEZsYWc6IGZhbHNlLAogICAgICAgICAgICAgICAgQ29tbWFuZDogJ2VjaG8ge3tGTEFHfX0gPiAvZmxhZycsCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBlZGl0Q2hhbGxlbmdlRm9ybTogewogICAgICAgICAgICAgICAgVGl0bGU6ICcnLAogICAgICAgICAgICAgICAgQmFzZVNjb3JlOiAxMDAwLAogICAgICAgICAgICAgICAgQXV0b1JlZnJlc2hGbGFnOiBmYWxzZSwKICAgICAgICAgICAgICAgIENvbW1hbmQ6ICcnLAogICAgICAgICAgICB9LAogICAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldENoYWxsZW5nZXMoKQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0Q2hhbGxlbmdlcygpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5HRVQoIi9tYW5hZ2VyL2NoYWxsZW5nZXMiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmNoYWxsZW5nZUxpc3QgPSByZXMKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKSkKICAgICAgICB9LAoKICAgICAgICBvbk5ld0NoYWxsZW5nZSgpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5QT1NUKCcvbWFuYWdlci9jaGFsbGVuZ2UnLCB0aGlzLm5ld0NoYWxsZW5nZUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMubmV3Q2hhbGxlbmdlRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAvLyDmuIXnqbrooajmoLwKICAgICAgICAgICAgICAgIHRoaXMubmV3Q2hhbGxlbmdlRm9ybSA9IHsKICAgICAgICAgICAgICAgICAgICBUaXRsZTogJycsCiAgICAgICAgICAgICAgICAgICAgQmFzZVNjb3JlOiAxMDAwLAogICAgICAgICAgICAgICAgICAgIEF1dG9SZWZyZXNoRmxhZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgQ29tbWFuZDogJ2VjaG8ge3tGTEFHfX0gPiAvZmxhZycsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmdldENoYWxsZW5nZXMoKQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogcmVzLCB0eXBlOiAnc3VjY2Vzcyd9KQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogZXJyLCB0eXBlOiAnZXJyb3InfSkpCiAgICAgICAgfSwKCiAgICAgICAgb25FZGl0Q2hhbGxlbmdlKCkgewogICAgICAgICAgICB0aGlzLnV0aWxzLlBVVCgnL21hbmFnZXIvY2hhbGxlbmdlJywgdGhpcy5lZGl0Q2hhbGxlbmdlRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2hhbGxlbmdlRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLmdldENoYWxsZW5nZXMoKQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogcmVzLCB0eXBlOiAnc3VjY2Vzcyd9KQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogZXJyLCB0eXBlOiAnZXJyb3InfSkpCiAgICAgICAgfSwKCiAgICAgICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICAgICAgICB0aGlzLnV0aWxzLkRFTEVURSgiL21hbmFnZXIvY2hhbGxlbmdlP2lkPSIgKyByb3cuSUQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5nZXRDaGFsbGVuZ2VzKCkKICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHRoaXMuJG1lc3NhZ2Uoe21lc3NhZ2U6IGVyciwgdHlwZTogJ2Vycm9yJ30pKQogICAgICAgIH0sCgogICAgICAgIGhhbmRsZVZpc2libGUoaWQsIHZpc2libGUpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5QT1NUKCIvbWFuYWdlci9jaGFsbGVuZ2UvdmlzaWJsZSIsIHsKICAgICAgICAgICAgICAgIElEOiBpZCwKICAgICAgICAgICAgICAgIFZpc2libGU6IHZpc2libGUKICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmdldENoYWxsZW5nZXMoKQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogZXJyLCB0eXBlOiAnZXJyb3InfSkpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Challenge.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Challenge.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <el-button type=\"primary\" @click=\"newChallengeDialogVisible = true\">{{$t('challenge.new')}}</el-button>\n        <el-table :data=\"challengeList\" style=\"width: 100%\" stripe v-loading=\"isLoading\">\n            <el-table-column width=\"80\" prop=\"ID\" label=\"ID\"/>\n            <el-table-column prop=\"Title\" :label=\"$t('challenge.title')\"/>\n            <el-table-column prop=\"BaseScore\" :label=\"$t('challenge.base_score')\"/>\n            <el-table-column prop=\"Visible\" :label=\"$t('challenge.visible')\">\n                <template slot-scope=\"scope\">{{scope.row.Visible}}</template>\n            </el-table-column>\n            <el-table-column prop=\"AutoRefreshFlag\" :label=\"$t('challenge.auto_refresh_flag')\">\n                <template slot-scope=\"scope\">{{scope.row.AutoRefreshFlag}}</template>\n            </el-table-column>\n            <el-table-column prop=\"Command\" :label=\"$t('challenge.command')\"/>\n            <el-table-column :label=\"$t('general.create_at')\" width=\"200\"\n                             :formatter=\"(row)=>utils.FormatGoTime(row.CreatedAt)\"/>\n            <el-table-column :label=\"$t('general.operate')\" width=\"300\">\n                <template slot-scope=\"scope\">\n                    <el-popconfirm\n                            :title=\"scope.row.Visible ? $t('challenge.invisible_title') : $t('challenge.visible_title')\"\n                            @onConfirm=\"handleVisible(scope.row.ID, !scope.row.Visible)\">\n                        <el-button plain size=\"mini\" slot=\"reference\">{{$t('challenge.set_visible')}}</el-button>\n                    </el-popconfirm>\n                    <el-button\n                            size=\"mini\"\n                            @click=\"()=>{editChallengeForm = JSON.parse(JSON.stringify(scope.row)); editChallengeDialogVisible = true}\">\n                        {{$t('general.edit')}}\n                    </el-button>\n                    <el-popconfirm\n                            :confirmButtonText=\"$t('general.confirm_cancel')\"\n                            :cancelButtonText=\"$t('general.cancel')\"\n                            icon=\"el-icon-info\"\n                            iconColor=\"red\"\n                            :title=\"$t('challenge.delete_title')\"\n                            @onConfirm=\"handleDelete(scope.row)\"\n                    >\n                        <el-button size=\"mini\" type=\"danger\" slot=\"reference\">{{$t('general.delete')}}\n                        </el-button>\n                    </el-popconfirm>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <!-- New Challenge -->\n        <el-dialog :title=\"$t('challenge.publish')\" :visible.sync=\"newChallengeDialogVisible\">\n            <el-form :model=\"newChallengeForm\" label-width=\"120px\">\n                <el-form-item :label=\"$t('challenge.title')\">\n                    <el-input v-model=\"newChallengeForm.Title\"/>\n                </el-form-item>\n                <el-form-item :label=\"$t('challenge.base_score')\">\n                    <el-input-number v-model=\"newChallengeForm.BaseScore\" :min=\"1\"/>\n                </el-form-item>\n                <el-form-item :label=\"$t('challenge.auto_refresh_flag')\">\n                    <el-switch v-model=\"newChallengeForm.AutoRefreshFlag\"></el-switch>\n                </el-form-item>\n                <el-form-item :label=\"$t('challenge.command')\" v-if=\"newChallengeForm.AutoRefreshFlag\">\n                    <el-input v-model=\"newChallengeForm.Command\"/>\n                    <span>{{$t('challenge.flag_placeholder')}}<code v-pre>{{FLAG}}</code></span>\n                </el-form-item>\n            </el-form>\n            <el-button type=\"primary\" @click=\"onNewChallenge\">{{$t('challenge.publish')}}</el-button>\n        </el-dialog>\n\n        <!-- Edit Challenge -->\n        <el-dialog :title=\"$t('challenge.edit')\" :visible.sync=\"editChallengeDialogVisible\">\n            <el-form :model=\"editChallengeForm\" label-width=\"120px\">\n                <el-form-item :label=\"$t('challenge.title')\">\n                    <el-input v-model=\"editChallengeForm.Title\"/>\n                </el-form-item>\n                <el-form-item :label=\"$t('challenge.base_score')\">\n                    <el-input-number v-model=\"editChallengeForm.BaseScore\" :min=\"1\"/>\n                </el-form-item>\n                <el-form-item :label=\"$t('challenge.auto_refresh_flag')\">\n                    <el-switch v-model=\"editChallengeForm.AutoRefreshFlag\"></el-switch>\n                </el-form-item>\n                <el-form-item :label=\"$t('challenge.command')\" v-if=\"editChallengeForm.AutoRefreshFlag\">\n                    <el-input v-model=\"editChallengeForm.Command\"/>\n                    <span>{{$t('challenge.flag_placeholder')}}<code v-pre>{{FLAG}}</code></span>\n                </el-form-item>\n            </el-form>\n            <el-button type=\"primary\" @click=\"onEditChallenge\">{{$t('challenge.edit')}}</el-button>\n        </el-dialog>\n\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Challenge\",\n        data() {\n            return {\n                isLoading: true,\n                challengeList: null,\n                newChallengeDialogVisible: false,\n                editChallengeDialogVisible: false,\n\n                newChallengeForm: {\n                    Title: '',\n                    BaseScore: 1000,\n                    AutoRefreshFlag: false,\n                    Command: 'echo {{FLAG}} > /flag',\n                },\n\n                editChallengeForm: {\n                    Title: '',\n                    BaseScore: 1000,\n                    AutoRefreshFlag: false,\n                    Command: '',\n                },\n            }\n        },\n\n        mounted() {\n            this.getChallenges()\n        },\n\n        methods: {\n            getChallenges() {\n                this.utils.GET(\"/manager/challenges\").then(res => {\n                    this.challengeList = res\n                    this.isLoading = false\n                }).catch(err => this.$message.error(err))\n            },\n\n            onNewChallenge() {\n                this.utils.POST('/manager/challenge', this.newChallengeForm).then(res => {\n                    this.newChallengeDialogVisible = false\n                    // 清空表格\n                    this.newChallengeForm = {\n                        Title: '',\n                        BaseScore: 1000,\n                        AutoRefreshFlag: false,\n                        Command: 'echo {{FLAG}} > /flag',\n                    }\n                    this.getChallenges()\n                    this.$message({message: res, type: 'success'})\n                }).catch(err => this.$message({message: err, type: 'error'}))\n            },\n\n            onEditChallenge() {\n                this.utils.PUT('/manager/challenge', this.editChallengeForm).then(res => {\n                    this.editChallengeDialogVisible = false\n                    this.getChallenges()\n                    this.$message({message: res, type: 'success'})\n                }).catch(err => this.$message({message: err, type: 'error'}))\n            },\n\n            handleDelete(row) {\n                this.utils.DELETE(\"/manager/challenge?id=\" + row.ID).then(res => {\n                    this.$message({\n                        message: res,\n                        type: 'success'\n                    });\n                    this.getChallenges()\n                }).catch(err => this.$message({message: err, type: 'error'}))\n            },\n\n            handleVisible(id, visible) {\n                this.utils.POST(\"/manager/challenge/visible\", {\n                    ID: id,\n                    Visible: visible\n                }).then(res => {\n                    this.$message({\n                        message: res,\n                        type: 'success'\n                    });\n                    this.getChallenges()\n                }).catch(err => this.$message({message: err, type: 'error'}))\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}