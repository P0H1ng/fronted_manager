{"remainingRequest":"/home/osboxes/Cardinal_manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/osboxes/Cardinal_manager_frontend/src/views/WebHook.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/osboxes/Cardinal_manager_frontend/src/views/WebHook.vue","mtime":1706256621149},{"path":"/home/osboxes/Cardinal_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1706256287886},{"path":"/home/osboxes/Cardinal_manager_frontend/node_modules/babel-loader/lib/index.js","mtime":1706256287673},{"path":"/home/osboxes/Cardinal_manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1706256287886},{"path":"/home/osboxes/Cardinal_manager_frontend/node_modules/vue-loader/lib/index.js","mtime":1706256337311}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJXZWJIb29rIiwKCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHdlYkhvb2tMaXN0OiBbXSwKICAgICAgICAgICAgaXNMb2FkaW5nOiB0cnVlLAoKICAgICAgICAgICAgbmV3V2ViSG9va0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgICAgICBlZGl0V2ViSG9va0RpYWxvZ1Zpc2libGU6IGZhbHNlLAoKICAgICAgICAgICAgbmV3V2ViSG9va0Zvcm06IHsKICAgICAgICAgICAgICAgIFVSTDogJycsCiAgICAgICAgICAgICAgICBUeXBlOiAnJywKICAgICAgICAgICAgICAgIFRva2VuOiAnJywKICAgICAgICAgICAgICAgIFJldHJ5OiAwLAogICAgICAgICAgICAgICAgVGltZW91dDogMCwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdFdlYkhvb2tGb3JtOiB7fSwKCiAgICAgICAgICAgIHR5cGVPcHRpb25zOiB7CiAgICAgICAgICAgICAgICAnYW55JzogdGhpcy4kaTE4bi50KCd3ZWJob29rLnR5cGVfYW55JyksCiAgICAgICAgICAgICAgICAnbmV3X3JvdW5kJzogdGhpcy4kaTE4bi50KCd3ZWJob29rLnR5cGVfbmV3X3JvdW5kJyksCiAgICAgICAgICAgICAgICAnc3VibWl0X2ZsYWcnOiB0aGlzLiRpMThuLnQoJ3dlYmhvb2sudHlwZV9zdWJtaXRfZmxhZycpLAogICAgICAgICAgICAgICAgJ2dhbWVfYmVnaW4nOiB0aGlzLiRpMThuLnQoJ3dlYmhvb2sudHlwZV9nYW1lX2JlZ2luJyksCiAgICAgICAgICAgICAgICAnZ2FtZV9wYXVzZSc6IHRoaXMuJGkxOG4udCgnd2ViaG9vay50eXBlX2dhbWVfcGF1c2UnKSwKICAgICAgICAgICAgICAgICdnYW1lX2VuZCc6IHRoaXMuJGkxOG4udCgnd2ViaG9vay50eXBlX2dhbWVfZW5kJykKCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAoKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRXZWJIb29rcygpCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBnZXRXZWJIb29rcygpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5HRVQoIi9tYW5hZ2VyL3dlYmhvb2tzIikudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy53ZWJIb29rTGlzdCA9IHJlcwogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIpKQogICAgICAgIH0sCgogICAgICAgIG9uTmV3V2ViSG9vaygpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5QT1NUKCcvbWFuYWdlci93ZWJob29rJywgdGhpcy5uZXdXZWJIb29rRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcykKICAgICAgICAgICAgICAgIHRoaXMubmV3V2ViSG9va0RpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5uZXdXZWJIb29rRm9ybSA9IHsKICAgICAgICAgICAgICAgICAgICBVUkw6ICcnLAogICAgICAgICAgICAgICAgICAgIFR5cGU6ICcnLAogICAgICAgICAgICAgICAgICAgIFRva2VuOiAnJywKICAgICAgICAgICAgICAgICAgICBSZXRyeTogMCwKICAgICAgICAgICAgICAgICAgICBUaW1lb3V0OiAwLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5nZXRXZWJIb29rcygpCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycikKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICBvbkVkaXRXZWJIb29rKCkgewogICAgICAgICAgICB0aGlzLnV0aWxzLlBVVCgnL21hbmFnZXIvd2ViaG9vaycsIHRoaXMuZWRpdFdlYkhvb2tGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzKQogICAgICAgICAgICAgICAgdGhpcy5lZGl0V2ViSG9va0RpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5nZXRXZWJIb29rcygpCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycikKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgICAgICAgIHRoaXMudXRpbHMuREVMRVRFKCIvbWFuYWdlci93ZWJob29rP2lkPSIgKyByb3cuSUQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5nZXRXZWJIb29rcygpCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB0aGlzLiRtZXNzYWdlKHttZXNzYWdlOiBlcnIsIHR5cGU6ICdlcnJvcid9KSkKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["WebHook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WebHook.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <el-button type=\"primary\" @click=\"newWebHookDialogVisible = true\">{{$t('webhook.add')}}</el-button>\n        <el-table :data=\"webHookList\" style=\"width: 100%\" stripe v-loading=\"isLoading\">\n            <el-table-column width=\"80\" prop=\"ID\" label=\"ID\"/>\n            <el-table-column prop=\"URL\" :label=\"$t('webhook.url')\"/>\n            <el-table-column prop=\"Type\" :label=\"$t('webhook.type')\">\n                <template slot-scope=\"scope\">{{typeOptions[scope.row.Type]}}</template>\n            </el-table-column>\n            <el-table-column prop=\"Token\" :label=\"$t('webhook.token')\"/>\n            <el-table-column width=\"120\" prop=\"Retry\" :label=\"$t('webhook.retry')\"/>\n            <el-table-column width=\"120\" prop=\"Timeout\" :label=\"$t('webhook.timeout')\"/>\n            <el-table-column :label=\"$t('general.operate')\" width=\"300\">\n                <template slot-scope=\"scope\">\n                    <el-button\n                            size=\"mini\"\n                            @click=\"()=>{editWebHookForm = JSON.parse(JSON.stringify(scope.row)); editWebHookDialogVisible = true}\">\n                        {{$t('general.edit')}}\n                    </el-button>\n                    <el-popconfirm\n                            :confirmButtonText=\"$t('general.confirm_cancel')\"\n                            :cancelButtonText=\"$t('general.cancel')\"\n                            icon=\"el-icon-info\"\n                            iconColor=\"red\"\n                            :title=\"$t('webhook.delete_title')\"\n                            @onConfirm=\"handleDelete(scope.row)\"\n                    >\n                        <el-button size=\"mini\" type=\"danger\" slot=\"reference\">{{$t('general.delete')}}\n                        </el-button>\n                    </el-popconfirm>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <!-- New WebHook -->\n        <el-dialog :title=\"$t('webhook.add')\" :visible.sync=\"newWebHookDialogVisible\">\n            <el-form :model=\"newWebHookForm\" label-width=\"120px\">\n                <el-form-item :label=\"$t('webhook.url')\">\n                    <el-input v-model=\"newWebHookForm.URL\"/>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.type')\">\n                    <el-select v-model=\"newWebHookForm.Type\" :placeholder=\"$t('webhook.please_select')\">\n                        <el-option\n                                v-for=\"(label, value) in typeOptions\"\n                                :key=\"value\"\n                                :label=\"label\"\n                                :value=\"value\">\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.token')\">\n                    <el-input v-model=\"newWebHookForm.Token\"/>\n                    <p>{{$t('webhook.token_tips')}}</p>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.retry')\">\n                    <el-input-number v-model=\"newWebHookForm.Retry\" :min=\"0\"></el-input-number>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.timeout')\">\n                    <el-input-number v-model=\"newWebHookForm.Timeout\" :min=\"0\"></el-input-number>\n                    <p>{{$t('webhook.timeout_tips')}}</p>\n                </el-form-item>\n            </el-form>\n            <el-button type=\"primary\" @click=\"onNewWebHook\">{{$t('webhook.publish')}}</el-button>\n        </el-dialog>\n\n        <!-- Edit WebHook -->\n        <el-dialog :title=\"$t('webhook.edit')\" :visible.sync=\"editWebHookDialogVisible\">\n            <el-form :model=\"editWebHookForm\" label-width=\"120px\">\n                <el-form-item :label=\"$t('webhook.url')\">\n                    <el-input v-model=\"editWebHookForm.URL\"/>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.type')\">\n                    <el-select v-model=\"editWebHookForm.Type\" :placeholder=\"$t('webhook.please_select')\">\n                        <el-option\n                                v-for=\"(label, value) in typeOptions\"\n                                :key=\"value\"\n                                :label=\"label\"\n                                :value=\"value\">\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.token')\">\n                    <el-input v-model=\"editWebHookForm.Token\"/>\n                    <p>{{$t('webhook.token_tips')}}</p>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.retry')\">\n                    <el-input-number v-model=\"editWebHookForm.Retry\" :min=\"0\"></el-input-number>\n                </el-form-item>\n                <el-form-item :label=\"$t('webhook.timeout')\">\n                    <el-input-number v-model=\"editWebHookForm.Timeout\" :min=\"0\"></el-input-number>\n                    <p>{{$t('webhook.timeout_tips')}}</p>\n                </el-form-item>\n            </el-form>\n            <el-button type=\"primary\" @click=\"onEditWebHook\">{{$t('webhook.edit')}}</el-button>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"WebHook\",\n\n        data() {\n            return {\n                webHookList: [],\n                isLoading: true,\n\n                newWebHookDialogVisible: false,\n                editWebHookDialogVisible: false,\n\n                newWebHookForm: {\n                    URL: '',\n                    Type: '',\n                    Token: '',\n                    Retry: 0,\n                    Timeout: 0,\n                },\n                editWebHookForm: {},\n\n                typeOptions: {\n                    'any': this.$i18n.t('webhook.type_any'),\n                    'new_round': this.$i18n.t('webhook.type_new_round'),\n                    'submit_flag': this.$i18n.t('webhook.type_submit_flag'),\n                    'game_begin': this.$i18n.t('webhook.type_game_begin'),\n                    'game_pause': this.$i18n.t('webhook.type_game_pause'),\n                    'game_end': this.$i18n.t('webhook.type_game_end')\n\n                }\n            }\n        },\n\n        mounted() {\n            this.getWebHooks()\n        },\n\n        methods: {\n            getWebHooks() {\n                this.utils.GET(\"/manager/webhooks\").then(res => {\n                    this.webHookList = res\n                    this.isLoading = false\n                }).catch(err => this.$message.error(err))\n            },\n\n            onNewWebHook() {\n                this.utils.POST('/manager/webhook', this.newWebHookForm).then(res => {\n                    this.$message.success(res)\n                    this.newWebHookDialogVisible = false\n                    this.newWebHookForm = {\n                        URL: '',\n                        Type: '',\n                        Token: '',\n                        Retry: 0,\n                        Timeout: 0,\n                    }\n                    this.getWebHooks()\n                }).catch(err => {\n                    this.$message.error(err)\n                })\n            },\n\n            onEditWebHook() {\n                this.utils.PUT('/manager/webhook', this.editWebHookForm).then(res => {\n                    this.$message.success(res)\n                    this.editWebHookDialogVisible = false\n                    this.getWebHooks()\n                }).catch(err => {\n                    this.$message.error(err)\n                })\n            },\n\n            handleDelete(row) {\n                this.utils.DELETE(\"/manager/webhook?id=\" + row.ID).then(res => {\n                    this.$message({\n                        message: res,\n                        type: 'success'\n                    });\n                    this.getWebHooks()\n                }).catch(err => this.$message({message: err, type: 'error'}))\n            },\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}