{"remainingRequest":"/home/kali/fronted_manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kali/fronted_manager/src/views/Flag.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kali/fronted_manager/src/views/Flag.vue","mtime":1718174862663},{"path":"/home/kali/fronted_manager/node_modules/cache-loader/dist/cjs.js","mtime":1718174862074},{"path":"/home/kali/fronted_manager/node_modules/babel-loader/lib/index.js","mtime":1718174862030},{"path":"/home/kali/fronted_manager/node_modules/cache-loader/dist/cjs.js","mtime":1718174862074},{"path":"/home/kali/fronted_manager/node_modules/vue-loader/lib/index.js","mtime":1718174862613}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmxhZyIsCgogIGRhdGE6ICgpID0+ICh7CiAgICBwYWdlOiAxLAogICAgcGVyOiAxNSwKCiAgICB0b3RhbDogMCwKICAgIGZsYWdMaXN0OiBudWxsLAoKICAgIHRlYW1MaXN0OiBbXSwKICAgIGNoYWxsZW5nZUxpc3Q6IFtdLAogICAgZXhwb3J0RmxhZ0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgZXhwb3J0Q2hhbGxlbmdlSUQ6IG51bGwsCgogICAgdG90YWxSb3VuZDogMCwKCiAgICAvLyBGaWx0ZXIKICAgIHJvdW5kOiAwLAogICAgdGVhbTogbnVsbCwKICAgIGNoYWxsZW5nZTogbnVsbCwKICB9KSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VG90YWxSb3VuZCgpCiAgICB0aGlzLmdldFRlYW1zKCkKICAgIHRoaXMuZ2V0RmxhZ3MoKQogICAgdGhpcy5nZXRDaGFsbGVuZ2VzKCkKICB9LAoKICBtZXRob2RzOiB7CiAgICBnZXRUZWFtcygpIHsKICAgICAgdGhpcy51dGlscy5HRVQoIi9tYW5hZ2VyL3RlYW1zIikudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGVhbUxpc3QgPSByZXMKICAgICAgfSkuY2F0Y2goZXJyID0+IHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKSkKICAgIH0sCgogICAgZ2V0Q2hhbGxlbmdlcygpIHsKICAgICAgdGhpcy51dGlscy5HRVQoIi9tYW5hZ2VyL2NoYWxsZW5nZXMiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jaGFsbGVuZ2VMaXN0ID0gcmVzCiAgICAgIH0pLmNhdGNoKGVyciA9PiB0aGlzLiRtZXNzYWdlLmVycm9yKGVycikpCiAgICB9LAoKICAgIGdldFRvdGFsUm91bmQoKSB7CiAgICAgIHRoaXMudXRpbHMuR0VUKCcvdGltZScpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRvdGFsUm91bmQgPSByZXMuVG90YWxSb3VuZAogICAgICB9KS5jYXRjaChlcnIgPT4gdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogZXJyLCB0eXBlOiAnZXJyb3InfSkpCiAgICB9LAoKICAgIGdldEZsYWdzKCkgewogICAgICBsZXQgdGVhbSA9IHRoaXMudGVhbSB8fCAwCiAgICAgIGxldCBjaGFsbGVuZ2UgPSB0aGlzLmNoYWxsZW5nZSB8fCAwCgogICAgICB0aGlzLnV0aWxzLkdFVChgL21hbmFnZXIvZmxhZ3M/cGVyPSR7dGhpcy5wZXJ9JnBhZ2U9JHt0aGlzLnBhZ2V9JnJvdW5kPSR7dGhpcy5yb3VuZH0mdGVhbT0ke3RlYW19JmNoYWxsZW5nZT0ke2NoYWxsZW5nZX1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5mbGFnTGlzdCA9IHJlcy5hcnJheQogICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWwKICAgICAgfSkuY2F0Y2goZXJyID0+IHRoaXMuJG1lc3NhZ2Uoe21lc3NhZ2U6IGVyciwgdHlwZTogJ2Vycm9yJ30pKQogICAgfSwKCiAgICBjbGVhbkZpbHRlcigpIHsKICAgICAgdGhpcy5yb3VuZCA9IDAKICAgICAgdGhpcy50ZWFtID0gbnVsbAogICAgICB0aGlzLmNoYWxsZW5nZSA9IG51bGwKICAgICAgdGhpcy5wYWdlID0gMQogICAgICB0aGlzLmdldEZsYWdzKCkKICAgIH0sCgogICAgZ2VuZXJhdGVGbGFnKCkgewogICAgICB0aGlzLiRjb25maXJtKHRoaXMuJGkxOG4udCgnZmxhZy5nZW5lcmF0ZV9mbGFnX2NvbmZpcm0nKSwgdGhpcy4kaTE4bi50KCdmbGFnLmNvbmZpcm0nKSwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiRpMThuLnQoJ2dlbmVyYWwuYXBwbHknKSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiRpMThuLnQoJ2dlbmVyYWwuY2FuY2VsJyksCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMudXRpbHMuUE9TVCgnL21hbmFnZXIvZmxhZy9nZW5lcmF0ZScpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuZ2V0RmxhZ3MoKQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogcmVzLCB0eXBlOiAnc3VjY2Vzcyd9KQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB0aGlzLiRtZXNzYWdlKHttZXNzYWdlOiBlcnIsIHR5cGU6ICdlcnJvcid9KSkKICAgICAgfSkKICAgIH0sCgogICAgZXhwb3J0RmxhZygpIHsKICAgICAgdGhpcy51dGlscy5HRVQoIi9tYW5hZ2VyL2ZsYWcvZXhwb3J0P2lkPSIgKyB0aGlzLmV4cG9ydENoYWxsZW5nZUlEKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocmVzKV0sIHt0eXBlOiAndGV4dC9wbGFpbid9KQogICAgICAgIGxldCBkb3dubG9hZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikKICAgICAgICBsZXQgaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpCiAgICAgICAgZG93bmxvYWRFbGVtZW50LmhyZWYgPSBocmVmCiAgICAgICAgZG93bmxvYWRFbGVtZW50LmRvd25sb2FkID0gbmFtZQogICAgICAgIGRvd25sb2FkRWxlbWVudC5jbGljaygpCiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoaHJlZikKICAgICAgfSkuY2F0Y2goZXJyID0+IHRoaXMuJG1lc3NhZ2Uoe21lc3NhZ2U6IGVyciwgdHlwZTogJ2Vycm9yJ30pKQogICAgfQogIH0KfQo="},{"version":3,"sources":["Flag.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Flag.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-form :inline=\"true\">\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"generateFlag\">{{ $t('flag.generate_flag') }}</el-button>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"exportFlagDialogVisible = true\">{{ $t('flag.export_flag') }}</el-button>\n      </el-form-item>\n      <el-form-item></el-form-item>\n      <el-form-item :label=\"$t('flag.round')\">\n        <el-input-number v-model=\"round\" controls-position=\"right\" :min=\"0\"></el-input-number>\n      </el-form-item>\n      <el-form-item :label=\"$t('flag.team')\">\n        <el-select v-model=\"team\" :placeholder=\"$t('flag.select_team')\">\n          <el-option\n              v-for=\"item in teamList\"\n              :key=\"item.ID\"\n              :label=\"item.Name\"\n              :value=\"item.ID\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item :label=\"$t('flag.challenge')\">\n        <el-select v-model=\"challenge\" :placeholder=\"$t('flag.select_challenge')\">\n          <el-option\n              v-for=\"item in challengeList\"\n              :key=\"item.ID\"\n              :label=\"item.Title\"\n              :value=\"item.ID\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button icon=\"el-icon-search\" type=\"primary\" round @click=\"()=> {page = 1; getFlags()}\">\n          {{ $t('flag.filter') }}\n        </el-button>\n        <el-button round @click=\"cleanFilter\"> {{ $t('flag.clean_filter') }}</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-table :data=\"flagList\" style=\"width: 100%\" stripe v-loading=\"flagList === null\">\n      <el-table-column width=\"80\" prop=\"ID\" label=\"ID\"/>\n      <el-table-column width=\"80\" prop=\"TeamID\" :label=\"$t('flag.team')\"/>\n      <el-table-column width=\"80\" prop=\"ChallengeID\" :label=\"$t('flag.challenge')\"/>\n      <el-table-column width=\"80\" prop=\"GameBoxID\" :label=\"$t('flag.gamebox')\"/>\n      <el-table-column width=\"80\" prop=\"Round\" :label=\"$t('flag.round')\"/>\n      <el-table-column prop=\"Flag\" :label=\"$t('flag.flag')\"/>\n    </el-table>\n    <br>\n    <el-pagination style=\"text-align:center\" background layout=\"prev, pager, next\" :total=\"total\" :page-size=\"per\"\n                   @current-change=\"(p)=>{page = p; getFlags()}\"></el-pagination>\n\n    <!-- Export -->\n    <el-dialog :title=\"$t('flag.export_flag')\" :visible.sync=\"exportFlagDialogVisible\">\n      <el-form label-width=\"120px\">\n        <el-form-item :label=\"$t('challenge.title')\">\n          <el-select v-model=\"exportChallengeID\">\n            <el-option\n                v-for=\"challenge in challengeList\"\n                :key=\"challenge.ID\"\n                :label=\"challenge.Title\"\n                :value=\"challenge.ID\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <el-button type=\"primary\" @click=\"exportFlag\">{{ $t('general.export') }}</el-button>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Flag\",\n\n  data: () => ({\n    page: 1,\n    per: 15,\n\n    total: 0,\n    flagList: null,\n\n    teamList: [],\n    challengeList: [],\n    exportFlagDialogVisible: false,\n    exportChallengeID: null,\n\n    totalRound: 0,\n\n    // Filter\n    round: 0,\n    team: null,\n    challenge: null,\n  }),\n\n  mounted() {\n    this.getTotalRound()\n    this.getTeams()\n    this.getFlags()\n    this.getChallenges()\n  },\n\n  methods: {\n    getTeams() {\n      this.utils.GET(\"/manager/teams\").then(res => {\n        this.teamList = res\n      }).catch(err => this.$message.error(err))\n    },\n\n    getChallenges() {\n      this.utils.GET(\"/manager/challenges\").then(res => {\n        this.challengeList = res\n      }).catch(err => this.$message.error(err))\n    },\n\n    getTotalRound() {\n      this.utils.GET('/time').then(res => {\n        this.totalRound = res.TotalRound\n      }).catch(err => this.$message({message: err, type: 'error'}))\n    },\n\n    getFlags() {\n      let team = this.team || 0\n      let challenge = this.challenge || 0\n\n      this.utils.GET(`/manager/flags?per=${this.per}&page=${this.page}&round=${this.round}&team=${team}&challenge=${challenge}`).then(res => {\n        this.flagList = res.array\n        this.total = res.total\n      }).catch(err => this.$message({message: err, type: 'error'}))\n    },\n\n    cleanFilter() {\n      this.round = 0\n      this.team = null\n      this.challenge = null\n      this.page = 1\n      this.getFlags()\n    },\n\n    generateFlag() {\n      this.$confirm(this.$i18n.t('flag.generate_flag_confirm'), this.$i18n.t('flag.confirm'), {\n        confirmButtonText: this.$i18n.t('general.apply'),\n        cancelButtonText: this.$i18n.t('general.cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.utils.POST('/manager/flag/generate').then(res => {\n          this.getFlags()\n          this.$message({message: res, type: 'success'})\n        }).catch(err => this.$message({message: err, type: 'error'}))\n      })\n    },\n\n    exportFlag() {\n      this.utils.GET(\"/manager/flag/export?id=\" + this.exportChallengeID).then(res => {\n        let blob = new Blob([JSON.stringify(res)], {type: 'text/plain'})\n        let downloadElement = document.createElement(\"a\")\n        let href = window.URL.createObjectURL(blob)\n        downloadElement.href = href\n        downloadElement.download = name\n        downloadElement.click()\n        window.URL.revokeObjectURL(href)\n      }).catch(err => this.$message({message: err, type: 'error'}))\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}